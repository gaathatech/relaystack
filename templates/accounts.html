{% extends 'base.html' %}

{% block title %}Accounts — RelayStack{% endblock %}

{% block content %}
  <div class="card">
    <div class="card-body">
      <h2 class="card-title h5">Accounts</h2>
      <form method="post" action="/accounts/create" class="row g-2 align-items-center mb-3">
        <div class="col-auto">
          <select class="form-select" name="provider">
            <option value="whatsapp">WhatsApp</option>
          </select>
        </div>
        <div class="col">
          <input class="form-control" name="account_id" placeholder="account name (e.g., personal)" />
        </div>
        <div class="col-auto">
          <button class="btn btn-primary" type="submit">Create Account Slot</button>
        </div>
      </form>

      {% if accounts %}
        <ul class="list-group">
          {% for acc in accounts %}
            <li class="list-group-item d-flex justify-content-between align-items-center">
              <div>{{ acc.provider }} / <strong>{{ acc.account_id }}</strong></div>
              <a class="btn btn-sm btn-outline-secondary" href="/accounts/{{ acc.provider }}/{{ acc.account_id }}/start_login">Start login (open QR)</a>
            </li>
          {% endfor %}
        </ul>
      {% else %}
        <p class="small">No accounts created yet. Create one above then click “Start login” to scan QR.</p>
      {% endif %}

      <p class="small mt-3">Sessions are stored locally in the server and should be encrypted in production.</p>
    </div>
  </div>
{% endblock %}
